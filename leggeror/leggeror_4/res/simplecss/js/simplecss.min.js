;zjs.extend({autocomplete:function(){this.each(function(){var a=this,e=zjs(this),s=e.position(),c=s.top+e.height(),r=s.left,d=e.width(),u,n=this.getAttribute('data-url'),t=null,o=this.getAttribute('data-min-length')||2,i={key:''},l=this.getAttribute('data-params')||null;e.attr('autocomplete','off');this.dataAutocomplete={};this.onkeyup=function(d){var m=d||window.event,u=m.keyCode;if(u==27){zjs('.autocomplete-result').remove();if(t){t.remove();t=null}}else if(u==40||u==38){c=this.autocompleteResult.children('.selected');if(c.length>0){this.autocompleteResult.children().removeClass('selected');if(u==40){c.next().addClass('selected')}else{c.prev().addClass('selected')}}else{if(u==40){c=this.autocompleteResult.children().first().addClass('selected')}else{c=this.autocompleteResult.children().last().addClass('selected')}}}else if(u==13){var c=this.autocompleteResult.children('.selected'),f=c.attr('data-label'),g=c.attr('data-value')||f;e.val(f);e.fireEvent('selected',[g,c]);zjs('.autocomplete-result').remove()}else{zjs('.autocomplete-result').remove();if(e.val()!=''&&n&&e.val().length>o-1){if(t==null){t=zjs('body').append('<span class="fa fa-spinner fa-spin"></span>');t.css({position:'absolute',top:s.top+(e.height()/2)-8+'px',left:r+(e.width())-20+'px'})};i.key=e.val();if(l!=null){var p=l.split('&');for(var h=0,y=p.length;h<y;h++){var v=p[h].split('=');i[v[0]]=v[1]}};zjs.ajax({url:n,data:i,success:function(e){if(t){t.remove();t=null};a.dataAutocomplete=JSON.parse(e);if(a.dataAutocomplete){a.drawTable()}}})}}};this.drawTable=function(){var s='<div class="autocomplete-result" style="top:'+c+'px;left:'+r+'px;width:'+d+'px;">',t,a='';for(var i=0,n=this.dataAutocomplete.length;i<n;++i){t=this.dataAutocomplete[i];a='<div class="autocomplete-row" data-label="'+t.label+'">'+t.label+'</div>';if(t.value){a='<div class="autocomplete-row" data-value="'+t.value+'">'+t.label+'</div>'};if(t.html){a='<div class="autocomplete-row"';if(t.value){a+=' data-value="'+t.value+'"'};if(t.label){a+=' data-label="'+t.label+'"'};a+='>'+t.html+'</div>'};s+=a};s+='</div>';this.autocompleteResult=zjs('body').append(s);this.autocompleteResult.children().click(function(){var t=zjs(this),a=t.attr('data-label'),s=t.attr('data-value')||a;e.val(a);e.fireEvent('selected',[s,t]);zjs('.autocomplete-result').remove()})}})}});zjs.extend({placeholder:function(){var t=Zjs.prototype.val;Zjs.prototype.val=function(e){var a=t.call(this,e);if(e!=undefined)a.css('color','');if(this[0].value==this[0].placeholder){a=''};return a};this.each(function(){this.placeholder=this.getAttribute('placeholder');this.value=this.placeholder;this.style.color='#999';this.onfocus=function(){if(this.value==this.placeholder){e.call(this)}};this.onkeydown=function(){if(this.value==this.placeholder){this.value=''}};this.onkeyup=function(){this.style.color='';if(this.value==''){this.value=this.placeholder;e.call(this)}}});function e(){this.style.color='#999';if(this.createTextRange){var e=this.createTextRange();e.move('character',0);e.select()}else{this.setSelectionRange(0,0)}}}});zjs.extend({validate:function(){var e=this.find('input[required]');this.find('.required-msg').remove(),validate=!0;e.each(function(){var e=zjs(this),i=e.attr('type'),s=e.val(),t=/.+/gi,a=e.attr('data-error-message')||'The field can not be empty';if(e.attr('data-pattern')){t=new RegExp(e.attr('data-pattern').replace(/^(\/)|(\/)$/g,''),'gi')};e.removeClass('input-error');e.parent().css('position','relative');switch(i){case'number':t=/^[-+]?(\d+|\d+\.\d*|\d*\.\d+)$/;a=e.attr('data-error-message')||'Please enter a valid number';break;case'email':t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;a=e.attr('data-error-message')||'Please enter a valid email address';break;case'url':t=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/;a=e.attr('data-error-message')||'Please enter a valid url';break;default:};if(!t.test(s)){validate=!1;zjs('<span class="required-msg"><span class="icon fa fa-warning"></span> '+a+'</span>').after(e);e.addClass('input-error');e.focus(function(){e.brothers('.required-msg').fadeOut()})}else{e.addClass('input-success')}});return validate}});var locale=window.navigator.userLanguage||window.navigator.language;locale=locale.split('-')[0];var months={it:['Gennaio','Febbraio','Marzo','Aprile','Maggio','Giugno','Luglio','Agosto','Settembre','Ottobre','Novembre','Dicembre'],en:['January','February','March','April','May','June','July','August','September','October','November','December']};var daysWeek={it:['Lun','Mar','Mer','Gio','Ven','Sab','Dom'],en:['Mon','The','Wed','Thu','Fri','Sat','Sun']};if(months[locale]===undefined)locale='en';var Calendar=function(e,a,i){var s={};this.setDate=function(e,t,a){this.day=e||undefined;this.month=t||undefined;this.year=a||undefined};this.getDate=function(){return[this.year,this.month,this.day]};this.getDateFromIndex=function(e){return s[e]};this.calculateDate=function(){s=(s==undefined)?{}:{select:s.select};var r=[31,0,31,30,31,30,31,31,30,31,30,31],l=new Date();r[1]=(((l.getFullYear()%100!=0)&&(l.getFullYear()%4==0))||(l.getFullYear()%400==0))?29:28;var i=this.month-1,o=r[i];firstDay=new Date(this.year,i,1).getDay(),index=-1,c=1,today=new Date(this.year,i,this.day).getDate(),e,t=35;if(firstDay==0)firstDay=7;if(o+(firstDay-1)>t){t+=7};for(var a=1;a<=t;a++){e={year:+this.year,month:+this.month};index=-1;if(a>=firstDay){index=a-(firstDay-1);if(index===today){s.select={day:today,month:+this.month,year:+this.year}}};if(index>o){index=-1};if(index===-1){if(a<firstDay){var n=11;e.month=n+1;if(i>0){n=i-1;e.month=i};e.year=(n==11)?(e.year-1):e.year;index=r[n]-((firstDay-1)-a)}else{e.month+=1;if(i==11){e.year+=1;e.month=1};index=c;c++}};e.day=index;s[a]=e};return s};this.draw=function(){var s=new Date(),t=this.calculateDate(),a='<table><thead><tr>',n=s.getMonth(),r=s.getDate(),i=s.getFullYear();for(var e=0;e<7;++e){a+='<th>'+daysWeek[locale][e]+'</th>'};a+='</tr></thead><tbody><tr>';for(var e in t){if(e!='select'){if(t[e].month!=this.month){a+='<td class="odd" data-index="'+e+'">'+t[e].day+'</td>'}else{a+=((t.select.day==t[e].day&&t.select.month==t[e].month&&t.select.year==t[e].year)?'<td class="select"  data-index="'+e+'">':'<td data-index="'+e+'">')+t[e].day+'</td>'};if(e%7==0){a+='</tr>'}}};a+='</tbody></table>';return a};this.setDate(e,a,i)};zjs.extend({calendar:function(e){this.each(function(){var e=zjs(this),a=e.position();this.onkeypress=function(){return!1};if(e.attr('data-show')!=undefined){t(e,!1)};e.click(function(a){t(e)});function t(e,a){zjs('.zjs-calendar').remove();var i=p(e.attr('data-format')),s=e.val(),a=(a==undefined)?!0:!1;if(s==''){var r=new Date(),s=[];if(e.attr('data-format')!=undefined){for(var o in i){if(o=='dd')s.push(r.getDate());if(o=='mm')s.push(r.getMonth()+1);if(o=='yyyy')s.push(r.getFullYear())}}else{s=[r.getFullYear(),r.getMonth()+1,r.getDate()]};s=s.join(i.s)};var d=s.split(i.s),t=d[i['mm']],n=d[i['yyyy']],m=d[i['dd']],l=new Calendar(m,t,n),c=e.position(),v=l.draw(),g='<div class="zjs-calendar"><div class="zjs-calendar-action-bar"><button class="zjs-calendar-prev">&laquo;</button><span>'+months[locale][t-1]+' '+n+'</span><button class="zjs-calendar-next">&raquo;</button></div>'+v+'</div>',h=zjs('body').append(g).css({top:(c.top+e.height())+'px',left:c.left+'px'});u(h,e);if(a===!0){zjs('.zjs-calendar').clickOut(function(t){if(t.target!=e[0]){h.remove();document.getElementsByTagName('html')[0].onclick=null}})};zjs('.zjs-calendar .zjs-calendar-next, .zjs-calendar .zjs-calendar-prev').click(function(a){if(zjs(a.target).hasClass('zjs-calendar-next')){if(t<12){t=+t+1}else if(t==12){t=1;n=+n+1}}else{if(t>1){t=t-1}else if(t==1){t=12;n=n-1}};l.setDate(undefined,t,n);zjs(this).parent().brothers('table').replace(l.draw());zjs(this).brothers('span').html(months[locale][t-1]+' '+n);u(zjs(this).parents('.zjs-calendar'),e)});function u(e,t){e.find('table td').click(function(a){var s=l.getDateFromIndex(zjs(this).attr('data-index'));if(s.day<10){s.day='0'+s.day};if(s.month<10){s.month='0'+s.month};f(t,{yyyy:s.year,mm:s.month,dd:s.day});t.fireEvent('change');e.remove();document.getElementsByTagName('html')[0].onclick=null})};function p(e){if(e==null){return{s:'-',yyyy:0,mm:1,dd:2}};var n=e.split(/[^A-z]/),t=e.split(/[A-z]/),s={};for(var i=t.length;i--;){if(t[i]!=''){t=t[i];break}};s.s=t;for(var a=0,r=n.length;a<r;++a){s[n[a]]=a};return s};function f(e,t){var a=[];for(var s in i){if(s!='s'){a.push(t[s])}};zjs(e).val(a.join(i.s))}}});return this}});zjs('.slides').each(function(){var a=zjs(this),h=zjs(this).find('.slide'),d=h.length,c,i,e=1,p=new jsMorph(),o=new jsMorph(),m=this,l=a.append('<div class="loader"></div>')[0],s=this.getAttribute('data-duration')||6000,t=s,n=0,r=a.children('.btn-next, .btn-prev'),v=zjs(this).append('<div class="spinner"><div><div><span class="fa fa-gear fa-spin fa-5x"></span>...loading</div></div></div>');a.find('img').ready(function(){v.fadeOut()});var f=function(t){var a='next';if(/(btn-prev)/i.test(t.target.className)){a='prev';e=(e==1)?d:e-1}else{e=(e>=d)?1:e+1};u(a,e)};r.bind('click',f);function u(e,t){c=a.find('.active');i=h.eq(t);i.addClass(e);r.unbind('click');p.reset(c[0],{left:(e=='next')?'-100%':'100%'},{duration:700},quinticEaseOut,null,null,function(){c.removeClass('active').removeAttribute('style')}).concat(i[0],{left:'0px'},{duration:700},quinticEaseOut,null,null,function(){i.removeClass(e).addClass('active').removeAttribute('style');r.bind('click',f)}).start()};this.start=function(){o.reset(l,{width:'100%'},{duration:t},null,null,function(e,a,s){n=t-s},function(){e=(e>=d)?1:e+1;u('next',e);l.style.width='0px';t=s;setTimeout(function(){a[0].start()},10)}).start()};this.pause=function(){t=(n==0)?s:n;o.reset()};this.stop=function(){l.style.width=0;t=s;o.reset()}});zjs.ready(function(){simplecssInit()});function simplecssInit(){zjs('<div class="icon-hide-menu"><span></span><span></span><span></span></div>').before('.menu > ul, .menu-horizontal > ul').click(function(){zjs(this).brothers('ul').first().slideToggle(500,quadraticEaseInOut,function(){this.style.cssText=''})});zjs('.msg[data-dismiss]').live('click','.msg .close',function(){var e=zjs(this).parent().attr('data-dismiss');if(e=='hide'){zjs(this).parent().hide()}else if(e=='fade'){zjs(this).parent().fadeOut(500)}});var e=zjs('.dropdown');e.each(function(){var t=zjs(this),e=t.attr('data-icon'),e=(e!=undefined)?e:'icon';t.find('.dropdown-item').brothers().append('<span class="dropdown-icon '+e+'"></span>')});e.click(function(e){e.stopPropagation();var t=zjs(this);t.children('.dropdown-item').show();t.clickOut(function(e){zjs('.dropdown-item').hide();document.getElementsByTagName('html')[0].onclick=null})});zjs('.dropdown-icon').click(function(e){e.stopPropagation();zjs(this).parent().brothers('.dropdown-item').show()});zjs('.dropdown-item').click(function(e){e.stopPropagation();var t=e.target;if(t.tagName.toLowerCase()=='img'){t=t.parentNode};t=zjs(t);var a=t.parents('.dropdown'),s=t.attr('data-value')||t.text();a.children().first().html(t.text()+''+a.children().first().children('.dropdown-icon')[0].outerHTML);a.find('.dropdown-item').hide();a.fireEvent('change',[zjs.trim(s)])});zjs('.dialog').wrap('<div class="dialog-container"></div>');var t=zjs('.dialog');zjs('.dialog.round').each(function(){zjs(this).children().last().addClass('round-bottom-left-rigth').css('border-bottom','none')});t.each(function(){zjs(this).children().last().css('border-bottom','0');var e=this.getAttribute('data-dismiss');if(!!e==!1){zjs(this).append('<span class="dialog-close close" data-dismiss="true"></span>')}});t.find('[data-dismiss="true"]').click(function(){hideDialog(zjs(this).parents('.dialog'))});zjs('[data-open-dialog]').click(function(e){var i=zjs(this).attr('data-open-dialog'),t=zjs(i),s=t.attr('data-effect')||'cubicEaseOut',a=t.attr('data-duration')||700;showDialog(t,a,s,this)});zjs('.progress-bar').each(function(){var e=zjs(this);if(e.attr('data-value')!=undefined){var i=e.attr('data-value'),s=e.attr('data-max-value'),a=e.width(),t=(a/s)*i;e.append('<div style="width:'+t+'px;"></div>')}});zjs(window).bind('resize',function(){zjs('[data-type="date"]').calendar()});zjs('[data-type="date"]').calendar();zjs('.tabs .tabs-link a').click(function(e){e.preventDefault();var t=zjs(this),a=t.attr('href').split('#tab')[1],s=t.parent().brothers('.tabs-content').children().eq(a);t.fireEvent('before-show',s[0]);var i=t.parent().brothers('.tabs-content').children().hide().eq(a).show();t.brothers().removeClass('current');t.addClass('current')});zjs('.accordion .accordion-link').click(function(){var e=zjs(this);e.brothers().slideToggle(300,null,function(){e.removeClass('selected')},function(){e.addClass('selected')})});if(document.createElement('input').placeholder==undefined){zjs('[placeholder]').placeholder()};zjs('.autocomplete').autocomplete()};function hideDialog(e){var t=e.parents('.dialog-container');e.css({display:'',left:'',top:''});t.hide();e.fireEvent('after-close',[e])};function showDialog(e,t,a,s){e.fireEvent('before-show',s);var a=(a!=undefined)?a:'cubicEaseOut',t=(t!=undefined)?t:700;e.parent().show();e.css({display:'inline-block'}).animate({top:'40px'},t,function(){e.fireEvent('after-show',s)},null,window[a])};